#{extends 'CRUD/layout.html' /}
#{set allowInsert:"${!blockInsert}" /}
#{set allowUpdate:"${!blockUpdate}" /}
#{set allowDelete:"${!blockDelete}" /}

<h2>&{'crud.blank.title', type.modelName}</h2>
<div class="step">
    <div id="middle-wizard">
        #{form action:@create(), enctype:'multipart/form-data'}
            #{crud.form}
                #{crud.custom 'name'}
                    #{system.renderTextField name: 'name', icon: 'icon-user'/}
                #{/crud.custom}
                #{crud.custom 'email'}
                    #{field 'object.email'}
                        <div class="form-group ${field.errorClass ? 'has-error' : ''}">
                            <input type="text" id="${field.id}" name="${field.name}" class="form-control fill-tooltip-grow" placeholder="&{field.name}" alt="&{field.name}" title="&{field.name}" autocomplete="off" value="${params[field.name]?.escape()?.raw() ?: field.error?.message == 'validation.required' ? '' : _value?.escape()?.raw()}" />
                            <span class="input-icon">
                                <i class="icon-mail"></i>
                            </span>
                            #{ifError field.name}
                                <span id="helpBlock2" class="help-block">${field.error.raw()}</span>
                            #{/ifError} 
                        </div>
                    #{/field}
                #{/crud.custom}
                #{crud.custom 'pass'}
                    #{field 'object.pass'}
                        <div class="form-group ${field.errorClass ? 'has-error' : ''}">
                            <input type="password" id="${field.id}" name="${field.name}" class="form-control fill-tooltip-grow" placeholder="&{field.name}" alt="&{field.name}" title="&{field.name}" autocomplete="off" value="${params[field.name]?.escape()?.raw() ?: field.error?.message == 'validation.required' ? '' : _value?.escape()?.raw()}" />
                            <span class="input-icon">
                                <i class="icon-lock"></i>
                            </span>
                            #{ifError field.name}
                                <span id="helpBlock2" class="help-block">${field.error.raw()}</span>
                            #{/ifError} 
                        </div>
                    #{/field}
                    #{field 'object.checkPass'}
                        <div class="form-group ${field.errorClass ? 'has-error' : ''}">
                            <input type="password" id="${field.id}" name="${field.name}" class="form-control fill-tooltip-grow" placeholder="&{field.name}" alt="&{field.name}" title="&{field.name}" autocomplete="off" value="${params[field.name]?.escape()?.raw() ?: field.error?.message == 'validation.required' ? '' : _value?.escape()?.raw()}" />
                            <span class="input-icon">
                                <i class="icon-lock"></i>
                            </span>
                            #{ifError field.name}
                                <span id="helpBlock2" class="help-block">${field.error.raw()}</span>
                            #{/ifError} 
                        </div>
                    #{/field}   
                #{/crud.custom}
            #{/crud.form}
            #{system.addCrudButtons /}
        #{/form}
    </div>
</div>
