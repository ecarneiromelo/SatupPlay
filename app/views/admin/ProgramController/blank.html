#{extends 'admin/ProgramController/base.html' /}
#{set allowInsert:"${!blockInsert}" /}
#{set allowUpdate:"${!blockUpdate}" /}
#{set allowDelete:"${!blockDelete}" /}

<h2>&{'menu.program.new.prog'}</h2>
<div id="middle-wizard">
    <div class="form_center mobile">
        #{form action:@create(), enctype:'multipart/form-data'}
            #{crud.form }
                #{crud.custom 'userGroup'}
                #{/crud.custom} 
                #{crud.custom 'showReport'}
                #{/crud.custom}
                #{crud.custom 'user'} 
                 <hr style="border-top: 3px solid #eee; margin-top: 3em;">
                 <h3 style="text-align: left;">&{'client'}</h3>
                    #{field 'userGroup.name'}
                        <div class="form-group ${field.errorClass ? 'has-error' : ''}">
                            <input type="text" id="${field.id}" name="${field.name}" class="form-control fill-tooltip-grow" placeholder="&{field.name}" alt="&{field.name}" title="&{field.name}" value="${params[field.name]?.escape()?.raw() ?: field.error?.message == 'validation.required' ? '' : _value?.escape()?.raw()}" />
                            <span class="input-icon">
                                <i class="icon-building"></i>
                            </span>
                            #{ifError field.name}
                                <span id="helpBlock2" class="help-block">${field.error.raw()}</span>
                            #{/ifError} 
                        </div>
                    #{/field}
                    <hr style="border-top: 3px solid #eee; margin-top: 3em;">
                    <h3 style="text-align: left;">&{'representative'}</h3>
                    #{field 'user.name'}
                        <div class="form-group ${field.errorClass ? 'has-error' : ''}">
                            <input type="text" id="${field.id}" name="${field.name}" class="form-control fill-tooltip-grow" placeholder="&{field.name}" alt="&{field.name}" title="&{field.name}" value="${params[field.name]?.escape()?.raw() ?: field.error?.message == 'validation.required' ? '' : _value?.escape()?.raw()}" />
                            <span class="input-icon">
                                <i class="icon-user""></i>
                            </span>
                            #{ifError field.name}
                                <span id="helpBlock2" class="help-block">${field.error.raw()}</span>
                            #{/ifError} 
                        </div>
                    #{/field}
                    #{field 'user.email'}
                        <div class="form-group ${field.errorClass ? 'has-error' : ''}">
                            <input type="text" id="${field.id}" name="${field.name}" class="form-control fill-tooltip-grow" placeholder="&{field.name}" alt="&{field.name}" title="&{field.name}" value="${params[field.name]?.escape()?.raw() ?: field.error?.message == 'validation.required' ? '' : _value?.escape()?.raw()}" />
                            <span class="input-icon">
                                <i class="icon-email"></i>
                            </span>
                            #{ifError field.name}
                                <span id="helpBlock2" class="help-block">${field.error.raw()}</span>
                            #{/ifError} 
                        </div>
                    #{/field}
                #{/crud.custom}
                #{crud.custom 'hasTreatment'}
                    #{field 'object.hasTreatment'}
                        <div class="form-group row text-left ${field.errorClass ? 'has-error' : ''}">
                             <div class="col-xs-12">
                                <div class="col-xs-12 col-md-6" style="padding: 0px; margin-bottom: 0.5em;">
                                    <input type="radio" name="${field.name}" value="true" ${field.value == true ? 'checked="true" '.raw() : ''} />
                                    <span style ="${field.errorClass ? 'color: #a94442;' : ''}" >&{'diagnosis.and.treatment'}</span>
                                </div>
                                <div class="col-xs-12 col-md-6" style="padding: 0px; margin-bottom: 0.5em;">
                                    <input type="radio" name="${field.name}" value="false" ${field.value == false ? 'checked="true" '.raw() : ''} />
                                    <span style ="${field.errorClass ? 'color: #a94442;' : ''}" >&{'exclusive.diagnosis'}</span>
                                </div>
                                #{ifError field.name}
                                    <span id="helpBlock2" class="help-block">${field.error.raw()}</span>
                                #{/ifError}
                            </div>
                        </div>
                    #{/field}                
                #{/crud.custom}
                #{crud.custom 'language'}
                    #{field 'object.language'}
                    <div class="form-group ${field.errorClass ? 'has-error' : ''} text-left">
                        <div class="styled-select">
                            #{select field.name, value: field.value, id:field.id, class:'form-control fill-tooltip-grow', alt: play.i18n.Messages.get(field.name), title: play.i18n.Messages.get(field.name)}                    
                                <option value="">&{'select.value.language'}</option>     
                                #{list items:models.ProgramBO.LanguageSetting.values(), as:'language'}                                                                                             
                                    <option name="${language.name()}" ord="${language.ordinal()}" value="${language.name()}" ${language.equals(field.value) ? 'selected="true"'.raw() : ''}>&{language.tag() + '.translate'}</option>
                                #{/list}  
                            #{/select}                
                            #{ifError field.name}
                                <span id="helpBlock2" class="help-block">${field.error.raw()}</span>
                            #{/ifError}
                        </div>
                    </div>
                    #{/field}
                #{/crud.custom}
            #{/crud.form }
            #{system.addCrudButtons /}
        #{/form}
    </div>
</div>
